{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Set Checks{% endblock %}</h1> 
{% endblock %}

{% block content %}
    

<div class="container-fluid  mt-5 ">
    
    <div class="row">    

        {#                  #}
        {# LEFT HAND PANEL #}
        {#                  #}

        <div class="col-6 ">
            
            <div class="card">
                <div class="card-body" style="font-size: 1em;">
                    <ul>
                        <li> Please load a file from your device. </li>
                        <li> Permitted formats are .xlsx (recommended) or tab separated (.txt or .tsv)</li>
                        <li> One header row is assumed (adjustability TBI) </li>
                        <li> For .xlsx format, only the first sheet is read</li>
                        <li> For .xlsx format, file upload can fail in browser specific ways if the file is open in Excel</li>
                        <li> Please keep the number of concepts less than ca. 1000 for today, and generally advise trials with <100 </li>
                        <li> You will be able to check the upload on the next screen. </li>
                        <li> See this guidance (TBI) for advice on the data required in your file </li>
                        <li> Some examples input files are in <a href="https://nhs.sharepoint.com/:f:/r/sites/msteams_0ce65d/Shared%20Documents/General/Design/example_value_sets_for_trial_app?csf=1&web=1&e=4MeVfX" target="_blank"> this sharepoint folder </a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-6">

            <!-- <div class="card" style="height: 60vh;  background-color: #f0f4f5;" > -->
            <div class="card border-0" style="height: 60vh;  background-color: #f0f4f5;">

                <div>
                               <!-- THE UPLOAD METHODS -->
                    <!-- SELECT A FILE -->
                    <style>
                    input[type="file"] {
                        display: none;
                    }
                    .custom-file-upload {
                       
                        display: inline-block;
                        padding: 6px 12px;
                        cursor: pointer;
                        width: 60vw; 
                        max-width: 400px; 
                        margin: 5 auto; 
                        border-style: solid;
                        border-width: 5px;
                        border-color: #005eb8;
                        background-color: white; 
                        border-radius: 20px; 
                        font-size: 2em; 
                        line-height: 2em; 
                        padding: 10px; 
                        text-align: center; 
                        /* color: */
                    }
                    .custom-file-upload:hover { background-color: #ffeb3b;} 
                    .custom-file-upload:active { background-color: #ffeb3b; }

                    </style>


                    <style>
                        .upload-methods > div {
                            display: block;
                            vertical-align: top;
                            margin-right: 1em;
                            padding-bottom: 1em ;
                            }
                    </style>
                    
                    <div  class="upload-methods">   
                        <!-- <div  style="display: inline-block; vertical-align: top; margin-right: 1em;">    -->
                        <div>       
                            <form action="/confirm_upload" class="data-browse-form" method="post" enctype="multipart/form-data">
                                <label for="data-browse-input" class="custom-file-upload">
                                    <i class="bi bi-cloud-upload-fill"></i> Browse for a file
                                </label>
                                <input id="data-browse-input" 
                                    type="file" 
                                    name="uploaded_file"
                                    accept=".txt,.tsv,.xlsx" 
                                    onchange="$('.data-browse-form').submit();" 
                                    />
                            </form>
                        </div>
                    </div> 
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="margin-top:1em">
        
        <div class="col-9"> 
        </div>
        <style>
            .setchks-btn {
                background-color:white;
                color: black;
                border-style: solid;
                border-color:#005eb8;
                border-width :3px; 
                }
            .setchks-btn:hover {background-color:#ffeb3b; border-style: solid; border-color:#005eb8; border-width :3px;  }
            .setchks-btn-inactive {
                background-color: lightgray;
                color: lightslategray;
                border-style: solid;
                }
        </style>
        <div class="col-2">

            {% if setchks_session.data_as_matrix != [] %}
            <a href="/confirm_upload"  class="btn setchks-btn"><i class="bi bi-arrow-right"></i> (Confirm upload)</a>
            {% endif %}
        </div>
    
    </div>
</div>

  
{% endblock %}
